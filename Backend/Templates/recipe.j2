
<!----------------------------------------------------------------------------------------------------------------------
-                                                                                                                      -
-    Created by: MPZinke on 2023.01.22                                                                                 -
-                                                                                                                      -
-    DESCRIPTION:                                                                                                      -
-    BUGS:                                                                                                             -
-    FUTURE:                                                                                                           -
-                                                                                                                      -
----------------------------------------------------------------------------------------------------------------------->


{% macro list_steps(listed_steps) %}
	<ul>
		{% for step in listed_steps %}
			<li>
				{{ step | replace_timer() }}
			</li>
		{% endfor %}
	</ul>
{% endmacro %}


{% extends "header.j2" %}
{% block body %}
	<title>
		{{ recipe.name() }}
	</title>
	<h1>
		{{ recipe.name() }}
	</h1>
	<table>
		<tr>
			<td style="border-left: 1px solid #cdd0d4; padding-left: 8px; padding-right: 8px;">
				Rating:
				{% for _ in range(recipe.rating()) %}
					✭
				{% endfor %}
				{% for _ in range(recipe.rating(), 5)  %}
					✩
				{% endfor %}
			</td>
			<td style="border-left: 1px solid #cdd0d4; padding-left: 8px; padding-right: 8px;">
				Serving Size:
				{{ recipe.serving_size() }}
			</td>
			<td style="border-left: 1px solid #cdd0d4; padding-left: 8px; padding-right: 8px;">
				<!-- This is here to add a right closing border -->
			</td>
		</tr>
		<tr>
			{% if recipe.total_time() != recipe.zero_duration() %}
				<td style="border-left: 1px solid #cdd0d4; padding-left: 8px; padding-right: 8px;">
					Total Time:
					{{ recipe.total_time() }}
				</td>
			{% endif %}
			{% if recipe.prep_time() != recipe.zero_duration() %}
				<td style="border-left: 1px solid #cdd0d4; padding-left: 8px; padding-right: 8px;">
					Prep Time:
					{{ recipe.prep_time() }}
				</td>
			{% endif %}
			{% if recipe.cook_time() != recipe.zero_duration() %}
				<td style="border-left: 1px solid #cdd0d4; padding-left: 8px; padding-right: 8px;">
					Cook Time:
					{{ recipe.cook_time() }}
				</td>
			{% endif %}
			<td style="border-left: 1px solid #cdd0d4; padding-left: 8px; padding-right: 8px;">
				<!-- This is here to add a right closing border -->
			</td>
		</tr>
	</table>
	<p>
		{{ recipe.notes() }}
	</p>
	<h2>
		Ingredients
	</h2>
	<table>
		{% for ingredient in recipe.ingredients() %}
			<tr>
				<td>
					{% if ingredient.amount() != 0 %}
						{{ ingredient.amount() }}
					{% endif %}
					{{ ingredient.quantity() }}
					<a href="/ingredient/{{ ingredient.name() }}">
						{{ ingredient.name() }}
					</a>
					{% if ingredient.notes() != '' %}
						{{ ingredient.notes() }}
					{% endif %}
				</td>
			</tr>
		{% endfor %}
	</table>
	<h2>
		Instructions
	</h2>
	{% with instructions = recipe.instructions() %}
		{% if instructions.__class__.__name__ == "list" %}
			{{ list_steps(instructions) }}
		{% elif instructions.__class__.__name__ == "dict" %}
			{% for section, steps in instructions.items() %}
				<h3>
					{{ section }}
				</h3>
				{{ list_steps(steps) }}
			{% endfor %}
		{% endif %}
	{% endwith %}
{% endblock %}